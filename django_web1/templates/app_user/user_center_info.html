{% extends 'base.html' %}

{% block head %}
	<script>

		// 加入购物车
		function addCart(gid) {

		    // 因为已经在用户中心了，只有登录了才能进来，所以不需要在判断是否登录，直接可以将商品加入购物车中
			$.get('/cart/add/',{'g_id': gid}, function (data) {
				if (data.is_add) {  // 添加成功
				    alert('添加成功，您稍后可以在购物车中查看到该商品');
				}
				else {
				    alert('添加失败');
				}
            });
        }
	</script>
{% endblock head %}

{% block body_main %}
    <div class="main_con clearfix">
        <div class="left_menu_con clearfix">
            <h3>用户中心</h3>
            <ul>
                <li><a href="/user/" class="active">· 个人信息</a></li>
                <li><a href="/user/order/">· 全部订单</a></li>
                <li><a href="/user/site/">· 收货地址</a></li>
            </ul>
        </div>
		<div class="right_content clearfix">
			<div class="info_con clearfix">
				<h3 class="common_title2">基本信息</h3>
				<ul class="user_info_list">
					<li><span>用户名：</span>{{user.u_name}}</li>
					<li><span>联系方式：</span>{{user.u_phone}}</li>
					<li><span>联系地址：</span>{{user.u_address}}</li>
				</ul>
			</div>

			<h3 class="common_title2">最近浏览</h3>
			<div class="has_view_list">
				<ul class="goods_type_list clearfix">
                    {% for goods in g_list %}
					<li>
                        <a href="/detail/{{ goods.id }}/"><img src="/static/{{ goods.g_pic }}"></a>
                        <h4><a href="/detail/{{ goods.id }}/">{{ goods.g_title }}</a></h4>
                        <div class="operate">
                            <span class="prize">￥{{ goods.g_price }}</span>
                            <span class="unit">{{ goods.g_price }}/{{ goods.g_unit }}</span>
                            <a href="javascript:addCart({{ goods.id }});" class="add_goods" title="加入购物车"></a>
                        </div>
					</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
{% endblock body_main %}


